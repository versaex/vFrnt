{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Elton\\\\OneDrive\\\\Desktop\\\\baseapp-2024\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Elton\\\\OneDrive\\\\Desktop\\\\baseapp-2024\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"C:\\\\Users\\\\Elton\\\\OneDrive\\\\Desktop\\\\baseapp-2024\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\Elton\\\\OneDrive\\\\Desktop\\\\baseapp-2024\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\Elton\\\\OneDrive\\\\Desktop\\\\baseapp-2024\\\\src\\\\containers\\\\GeetestCaptcha\\\\index.tsx\";\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { initGeetest } from '../../helpers/geetest';\nimport { geetestCaptchaFetch, selectCaptchaKeys, selectCurrentLanguage } from '../../modules';\nvar GeetestCaptchaComponent = /*#__PURE__*/function (_React$Component) {\n  _inherits(GeetestCaptchaComponent, _React$Component);\n  var _super = _createSuper(GeetestCaptchaComponent);\n  function GeetestCaptchaComponent(props) {\n    var _this;\n    _classCallCheck(this, GeetestCaptchaComponent);\n    _this = _super.call(this, props);\n    _this.captchaContainerRef = void 0;\n    _this.captcha = void 0;\n    _this.validate = function () {\n      return _this.captcha && _this.captcha.getValidate();\n    };\n    _this.reset = function () {\n      return _this.captcha && _this.captcha.reset();\n    };\n    _this.captchaComingHandler = function (captcha) {\n      _this.captcha = captcha;\n      _this.captcha.appendTo(_this.captchaContainerRef.current);\n      _this.captcha.onSuccess(_this.captchaSuccessHandler);\n    };\n    _this.captchaSuccessHandler = function () {\n      if (_this.props.onSuccess) {\n        _this.props.onSuccess(_this.validate());\n      }\n    };\n    _this.captchaContainerRef = React.createRef();\n    return _this;\n  }\n  _createClass(GeetestCaptchaComponent, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.geetestCaptchaFetch();\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(next) {\n      if (this.props.geetestCaptchaKeys !== next.geetestCaptchaKeys && next.geetestCaptchaKeys !== undefined) {\n        var geetestCaptchaKeys = next.geetestCaptchaKeys,\n          lang = next.lang;\n        initGeetest({\n          gt: geetestCaptchaKeys.gt,\n          challenge: geetestCaptchaKeys.challenge,\n          offline: 0,\n          new_captcha: false,\n          product: 'popup',\n          width: '100%',\n          lang: lang,\n          https: true\n        }, this.captchaComingHandler);\n      }\n      if (next.shouldCaptchaReset && !this.props.shouldCaptchaReset) {\n        this.reset();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        ref: this.captchaContainerRef,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 16\n        }\n      });\n    }\n  }]);\n  return GeetestCaptchaComponent;\n}(React.Component);\nvar mapDispatchProps = {\n  geetestCaptchaFetch: geetestCaptchaFetch\n};\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    lang: selectCurrentLanguage(state),\n    geetestCaptchaKeys: selectCaptchaKeys(state)\n  };\n};\nexport var GeetestCaptcha = connect(mapStateToProps, mapDispatchProps)(GeetestCaptchaComponent);","map":{"version":3,"names":["React","connect","initGeetest","geetestCaptchaFetch","selectCaptchaKeys","selectCurrentLanguage","GeetestCaptchaComponent","props","captchaContainerRef","captcha","validate","getValidate","reset","captchaComingHandler","appendTo","current","onSuccess","captchaSuccessHandler","createRef","next","geetestCaptchaKeys","undefined","lang","gt","challenge","offline","new_captcha","product","width","https","shouldCaptchaReset","Component","mapDispatchProps","mapStateToProps","state","GeetestCaptcha"],"sources":["C:/Users/Elton/OneDrive/Desktop/baseapp-2024/src/containers/GeetestCaptcha/index.tsx"],"sourcesContent":["import * as React from 'react';\nimport {\n    connect,\n    MapStateToProps,\n} from 'react-redux';\nimport { initGeetest } from '../../helpers/geetest';\nimport {\n    geetestCaptchaFetch,\n    GeetestCaptchaKeys,\n    GeetestCaptchaResponse,\n    RootState,\n    selectCaptchaKeys,\n    selectCurrentLanguage,\n} from '../../modules';\n\ninterface OwnProps {\n    shouldCaptchaReset?: boolean;\n    onSuccess?: (value?: GeetestCaptchaResponse) => void;\n}\n\ninterface ReduxProps {\n    lang: string;\n    geetestCaptchaKeys?: GeetestCaptchaKeys;\n}\n\ninterface DispatchProps {\n    geetestCaptchaFetch: typeof geetestCaptchaFetch;\n}\n\ntype Props = ReduxProps & DispatchProps & OwnProps;\n\nclass GeetestCaptchaComponent extends React.Component<Props> {\n\n    public constructor(props) {\n        super(props);\n        this.captchaContainerRef = React.createRef();\n    }\n\n    private captchaContainerRef;\n    private captcha;\n\n    public componentDidMount() {\n        this.props.geetestCaptchaFetch();\n    }\n\n    public componentWillReceiveProps(next: Props) {\n        if (this.props.geetestCaptchaKeys !== next.geetestCaptchaKeys && next.geetestCaptchaKeys !== undefined) {\n            const {\n                geetestCaptchaKeys,\n                lang,\n            } = next;\n            initGeetest({\n                gt: geetestCaptchaKeys.gt,\n                challenge: geetestCaptchaKeys.challenge,\n                offline: 0,\n                new_captcha: false,\n                product: 'popup',\n                width: '100%',\n                lang: lang,\n                https: true,\n            }, this.captchaComingHandler);\n        }\n\n        if (next.shouldCaptchaReset && !this.props.shouldCaptchaReset) {\n            this.reset();\n        }\n    }\n\n    public validate = () => {\n        return this.captcha && this.captcha.getValidate();\n    };\n\n    public reset = () => {\n        return this.captcha && this.captcha.reset();\n    };\n\n    public render() {\n        return <div ref={this.captchaContainerRef} />;\n    }\n\n    private captchaComingHandler = captcha => {\n        this.captcha = captcha;\n        this.captcha.appendTo(this.captchaContainerRef.current);\n        this.captcha.onSuccess(this.captchaSuccessHandler);\n    };\n\n    private captchaSuccessHandler = () => {\n        if (this.props.onSuccess) {\n            this.props.onSuccess(this.validate());\n        }\n    };\n}\n\nconst mapDispatchProps = {\n    geetestCaptchaFetch,\n};\n\nconst mapStateToProps: MapStateToProps<ReduxProps, {}, RootState> =\n    (state: RootState): ReduxProps => ({\n        lang: selectCurrentLanguage(state),\n        geetestCaptchaKeys: selectCaptchaKeys(state),\n    });\n\nexport const GeetestCaptcha = connect(mapStateToProps, mapDispatchProps)(GeetestCaptchaComponent);\n"],"mappings":";;;;;AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,SACIC,OAAO,QAEJ,aAAa;AACpB,SAASC,WAAW,QAAQ,uBAAuB;AACnD,SACIC,mBAAmB,EAInBC,iBAAiB,EACjBC,qBAAqB,QAClB,eAAe;AAAC,IAkBjBC,uBAAuB;EAAA;EAAA;EAEzB,iCAAmBC,KAAK,EAAE;IAAA;IAAA;IACtB,0BAAMA,KAAK;IAAE,MAITC,mBAAmB;IAAA,MACnBC,OAAO;IAAA,MA6BRC,QAAQ,GAAG,YAAM;MACpB,OAAO,MAAKD,OAAO,IAAI,MAAKA,OAAO,CAACE,WAAW,EAAE;IACrD,CAAC;IAAA,MAEMC,KAAK,GAAG,YAAM;MACjB,OAAO,MAAKH,OAAO,IAAI,MAAKA,OAAO,CAACG,KAAK,EAAE;IAC/C,CAAC;IAAA,MAMOC,oBAAoB,GAAG,UAAAJ,OAAO,EAAI;MACtC,MAAKA,OAAO,GAAGA,OAAO;MACtB,MAAKA,OAAO,CAACK,QAAQ,CAAC,MAAKN,mBAAmB,CAACO,OAAO,CAAC;MACvD,MAAKN,OAAO,CAACO,SAAS,CAAC,MAAKC,qBAAqB,CAAC;IACtD,CAAC;IAAA,MAEOA,qBAAqB,GAAG,YAAM;MAClC,IAAI,MAAKV,KAAK,CAACS,SAAS,EAAE;QACtB,MAAKT,KAAK,CAACS,SAAS,CAAC,MAAKN,QAAQ,EAAE,CAAC;MACzC;IACJ,CAAC;IAvDG,MAAKF,mBAAmB,GAAGR,KAAK,CAACkB,SAAS,EAAE;IAAC;EACjD;EAAC;IAAA;IAAA,OAKD,6BAA2B;MACvB,IAAI,CAACX,KAAK,CAACJ,mBAAmB,EAAE;IACpC;EAAC;IAAA;IAAA,OAED,mCAAiCgB,IAAW,EAAE;MAC1C,IAAI,IAAI,CAACZ,KAAK,CAACa,kBAAkB,KAAKD,IAAI,CAACC,kBAAkB,IAAID,IAAI,CAACC,kBAAkB,KAAKC,SAAS,EAAE;QACpG,IACID,kBAAkB,GAElBD,IAAI,CAFJC,kBAAkB;UAClBE,IAAI,GACJH,IAAI,CADJG,IAAI;QAERpB,WAAW,CAAC;UACRqB,EAAE,EAAEH,kBAAkB,CAACG,EAAE;UACzBC,SAAS,EAAEJ,kBAAkB,CAACI,SAAS;UACvCC,OAAO,EAAE,CAAC;UACVC,WAAW,EAAE,KAAK;UAClBC,OAAO,EAAE,OAAO;UAChBC,KAAK,EAAE,MAAM;UACbN,IAAI,EAAEA,IAAI;UACVO,KAAK,EAAE;QACX,CAAC,EAAE,IAAI,CAAChB,oBAAoB,CAAC;MACjC;MAEA,IAAIM,IAAI,CAACW,kBAAkB,IAAI,CAAC,IAAI,CAACvB,KAAK,CAACuB,kBAAkB,EAAE;QAC3D,IAAI,CAAClB,KAAK,EAAE;MAChB;IACJ;EAAC;IAAA;IAAA,OAUD,kBAAgB;MACZ,oBAAO;QAAK,GAAG,EAAE,IAAI,CAACJ,mBAAoB;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,EAAG;IACjD;EAAC;EAAA;AAAA,EA/CiCR,KAAK,CAAC+B,SAAS;AA8DrD,IAAMC,gBAAgB,GAAG;EACrB7B,mBAAmB,EAAnBA;AACJ,CAAC;AAED,IAAM8B,eAA2D,GAC7D,SADEA,eAA2D,CAC5DC,KAAgB;EAAA,OAAkB;IAC/BZ,IAAI,EAAEjB,qBAAqB,CAAC6B,KAAK,CAAC;IAClCd,kBAAkB,EAAEhB,iBAAiB,CAAC8B,KAAK;EAC/C,CAAC;AAAA,CAAC;AAEN,OAAO,IAAMC,cAAc,GAAGlC,OAAO,CAACgC,eAAe,EAAED,gBAAgB,CAAC,CAAC1B,uBAAuB,CAAC"},"metadata":{},"sourceType":"module"}