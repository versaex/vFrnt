{"ast":null,"code":"import _createForOfIteratorHelper from \"C:\\\\Users\\\\Elton\\\\OneDrive\\\\Desktop\\\\baseapp-2024\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";\nimport _toConsumableArray from \"C:\\\\Users\\\\Elton\\\\OneDrive\\\\Desktop\\\\baseapp-2024\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport { isFinexEnabled } from '../../../api';\nimport { DEFAULT_TRADING_VIEW_INTERVAL } from '../../../constants';\nimport { marketStreams } from './actions';\nexport var generateSocketURI = function generateSocketURI(baseUrl, s) {\n  return \"\".concat(baseUrl, \"/?stream=\").concat(s.sort().join('&stream='));\n};\nexport var formatTicker = function formatTicker(events) {\n  var tickers = {};\n  for (var market in events) {\n    if (events.hasOwnProperty(market)) {\n      var event = events[market];\n      var amount = event.amount,\n        avg_price = event.avg_price,\n        high = event.high,\n        last = event.last,\n        low = event.low,\n        open = event.open,\n        price_change_percent = event.price_change_percent,\n        volume = event.volume;\n      tickers[market] = {\n        amount: amount,\n        avg_price: avg_price,\n        high: high,\n        last: last,\n        low: low,\n        open: open,\n        price_change_percent: price_change_percent,\n        volume: volume\n      };\n    }\n  }\n  return tickers;\n};\nexport var streamsBuilder = function streamsBuilder(withAuth, prevSubscriptions, market) {\n  var streams = ['global.tickers'];\n  if (withAuth) {\n    streams = [].concat(_toConsumableArray(streams), ['order', 'trade', 'deposit_address']);\n    if (isFinexEnabled()) {\n      streams = [].concat(_toConsumableArray(streams), ['balances']);\n    }\n  }\n  if (market) {\n    streams = [].concat(_toConsumableArray(streams), _toConsumableArray(marketStreams(market).channels));\n  }\n  var _iterator = _createForOfIteratorHelper(prevSubscriptions),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var stream = _step.value;\n      if (streams.indexOf(stream) < 0) {\n        streams.push(stream);\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  return streams;\n};\nexport var periodsMapNumber = {\n  '1m': 1,\n  '5m': 5,\n  '15m': 15,\n  '30m': 30,\n  '1h': 60,\n  '2h': 120,\n  '4h': 240,\n  '6h': 360,\n  '12h': 720,\n  '1d': 1440,\n  '3d': 4320,\n  '1w': 10080\n};\nexport var periodsMapString = {\n  1: '1m',\n  5: '5m',\n  15: '15m',\n  30: '30m',\n  60: '1h',\n  120: '2h',\n  240: '4h',\n  360: '6h',\n  720: '12h',\n  1440: '1d',\n  4320: '3d',\n  10080: '1w'\n};\nexport var periodStringToMinutes = function periodStringToMinutes(period) {\n  return periodsMapNumber[period] || +DEFAULT_TRADING_VIEW_INTERVAL;\n};\nexport var periodMinutesToString = function periodMinutesToString(period) {\n  return periodsMapString[period] || periodsMapString[+DEFAULT_TRADING_VIEW_INTERVAL];\n};\nexport var marketKlineStreams = function marketKlineStreams(marketId, periodString) {\n  return {\n    channels: [\"\".concat(marketId, \".kline-\").concat(periodString)]\n  };\n};","map":{"version":3,"names":["isFinexEnabled","DEFAULT_TRADING_VIEW_INTERVAL","marketStreams","generateSocketURI","baseUrl","s","sort","join","formatTicker","events","tickers","market","hasOwnProperty","event","amount","avg_price","high","last","low","open","price_change_percent","volume","streamsBuilder","withAuth","prevSubscriptions","streams","channels","stream","indexOf","push","periodsMapNumber","periodsMapString","periodStringToMinutes","period","periodMinutesToString","marketKlineStreams","marketId","periodString"],"sources":["C:/Users/Elton/OneDrive/Desktop/baseapp-2024/src/modules/public/ranger/helpers.ts"],"sourcesContent":["import { isFinexEnabled } from '../../../api';\nimport { DEFAULT_TRADING_VIEW_INTERVAL } from '../../../constants';\nimport { Market, Ticker, TickerEvent } from '../markets';\nimport { marketStreams } from './actions';\n\nexport const generateSocketURI = (baseUrl: string, s: string[]) => `${baseUrl}/?stream=${s.sort().join('&stream=')}`;\n\nexport const formatTicker = (events: { [pair: string]: TickerEvent }): { [pair: string]: Ticker } => {\n    const tickers = {};\n    for (const market in events) {\n        if (events.hasOwnProperty(market)) {\n            const event: TickerEvent = events[market];\n            const {\n                amount,\n                avg_price,\n                high,\n                last,\n                low,\n                open,\n                price_change_percent,\n                volume,\n            } = event;\n            tickers[market] = {\n                amount,\n                avg_price,\n                high,\n                last,\n                low,\n                open,\n                price_change_percent,\n                volume,\n            };\n        }\n    }\n\n    return tickers;\n};\n\nexport const streamsBuilder = (withAuth: boolean, prevSubscriptions: string[], market: Market | undefined) => {\n    let streams: string[] = ['global.tickers'];\n\n    if (withAuth) {\n        streams = [\n            ...streams,\n            'order',\n            'trade',\n            'deposit_address',\n        ];\n\n        if (isFinexEnabled()) {\n            streams = [\n                ...streams,\n                'balances',\n            ];\n        }\n    }\n    if (market) {\n        streams = [\n            ...streams,\n            ...(marketStreams(market).channels),\n        ];\n    }\n    for (const stream of prevSubscriptions) {\n        if (streams.indexOf(stream) < 0) {\n            streams.push(stream);\n        }\n    }\n\n    return streams;\n};\n\nexport const periodsMapNumber: { [pair: string]: number } = {\n    '1m': 1,\n    '5m': 5,\n    '15m': 15,\n    '30m': 30,\n    '1h': 60,\n    '2h': 120,\n    '4h': 240,\n    '6h': 360,\n    '12h': 720,\n    '1d': 1440,\n    '3d': 4320,\n    '1w': 10080,\n};\n\nexport const periodsMapString: { [pair: number]: string } = {\n    1: '1m',\n    5: '5m',\n    15: '15m',\n    30: '30m',\n    60: '1h',\n    120: '2h',\n    240: '4h',\n    360: '6h',\n    720: '12h',\n    1440: '1d',\n    4320: '3d',\n    10080: '1w',\n};\n\nexport const periodStringToMinutes = (period: string): number => periodsMapNumber[period] || +DEFAULT_TRADING_VIEW_INTERVAL;\nexport const periodMinutesToString = (period: number): string => periodsMapString[period] || periodsMapString[+DEFAULT_TRADING_VIEW_INTERVAL];\n\nexport const marketKlineStreams = (marketId: string, periodString: string) => ({\n    channels: [\n        `${marketId}.kline-${periodString}`,\n    ],\n});\n"],"mappings":";;AAAA,SAASA,cAAc,QAAQ,cAAc;AAC7C,SAASC,6BAA6B,QAAQ,oBAAoB;AAElE,SAASC,aAAa,QAAQ,WAAW;AAEzC,OAAO,IAAMC,iBAAiB,GAAG,SAApBA,iBAAiB,CAAIC,OAAe,EAAEC,CAAW;EAAA,iBAAQD,OAAO,sBAAYC,CAAC,CAACC,IAAI,EAAE,CAACC,IAAI,CAAC,UAAU,CAAC;AAAA,CAAE;AAEpH,OAAO,IAAMC,YAAY,GAAG,SAAfA,YAAY,CAAIC,MAAuC,EAAiC;EACjG,IAAMC,OAAO,GAAG,CAAC,CAAC;EAClB,KAAK,IAAMC,MAAM,IAAIF,MAAM,EAAE;IACzB,IAAIA,MAAM,CAACG,cAAc,CAACD,MAAM,CAAC,EAAE;MAC/B,IAAME,KAAkB,GAAGJ,MAAM,CAACE,MAAM,CAAC;MACzC,IACIG,MAAM,GAQND,KAAK,CARLC,MAAM;QACNC,SAAS,GAOTF,KAAK,CAPLE,SAAS;QACTC,IAAI,GAMJH,KAAK,CANLG,IAAI;QACJC,IAAI,GAKJJ,KAAK,CALLI,IAAI;QACJC,GAAG,GAIHL,KAAK,CAJLK,GAAG;QACHC,IAAI,GAGJN,KAAK,CAHLM,IAAI;QACJC,oBAAoB,GAEpBP,KAAK,CAFLO,oBAAoB;QACpBC,MAAM,GACNR,KAAK,CADLQ,MAAM;MAEVX,OAAO,CAACC,MAAM,CAAC,GAAG;QACdG,MAAM,EAANA,MAAM;QACNC,SAAS,EAATA,SAAS;QACTC,IAAI,EAAJA,IAAI;QACJC,IAAI,EAAJA,IAAI;QACJC,GAAG,EAAHA,GAAG;QACHC,IAAI,EAAJA,IAAI;QACJC,oBAAoB,EAApBA,oBAAoB;QACpBC,MAAM,EAANA;MACJ,CAAC;IACL;EACJ;EAEA,OAAOX,OAAO;AAClB,CAAC;AAED,OAAO,IAAMY,cAAc,GAAG,SAAjBA,cAAc,CAAIC,QAAiB,EAAEC,iBAA2B,EAAEb,MAA0B,EAAK;EAC1G,IAAIc,OAAiB,GAAG,CAAC,gBAAgB,CAAC;EAE1C,IAAIF,QAAQ,EAAE;IACVE,OAAO,gCACAA,OAAO,IACV,OAAO,EACP,OAAO,EACP,iBAAiB,EACpB;IAED,IAAIzB,cAAc,EAAE,EAAE;MAClByB,OAAO,gCACAA,OAAO,IACV,UAAU,EACb;IACL;EACJ;EACA,IAAId,MAAM,EAAE;IACRc,OAAO,gCACAA,OAAO,sBACNvB,aAAa,CAACS,MAAM,CAAC,CAACe,QAAQ,EACrC;EACL;EAAC,2CACoBF,iBAAiB;IAAA;EAAA;IAAtC,oDAAwC;MAAA,IAA7BG,MAAM;MACb,IAAIF,OAAO,CAACG,OAAO,CAACD,MAAM,CAAC,GAAG,CAAC,EAAE;QAC7BF,OAAO,CAACI,IAAI,CAACF,MAAM,CAAC;MACxB;IACJ;EAAC;IAAA;EAAA;IAAA;EAAA;EAED,OAAOF,OAAO;AAClB,CAAC;AAED,OAAO,IAAMK,gBAA4C,GAAG;EACxD,IAAI,EAAE,CAAC;EACP,IAAI,EAAE,CAAC;EACP,KAAK,EAAE,EAAE;EACT,KAAK,EAAE,EAAE;EACT,IAAI,EAAE,EAAE;EACR,IAAI,EAAE,GAAG;EACT,IAAI,EAAE,GAAG;EACT,IAAI,EAAE,GAAG;EACT,KAAK,EAAE,GAAG;EACV,IAAI,EAAE,IAAI;EACV,IAAI,EAAE,IAAI;EACV,IAAI,EAAE;AACV,CAAC;AAED,OAAO,IAAMC,gBAA4C,GAAG;EACxD,CAAC,EAAE,IAAI;EACP,CAAC,EAAE,IAAI;EACP,EAAE,EAAE,KAAK;EACT,EAAE,EAAE,KAAK;EACT,EAAE,EAAE,IAAI;EACR,GAAG,EAAE,IAAI;EACT,GAAG,EAAE,IAAI;EACT,GAAG,EAAE,IAAI;EACT,GAAG,EAAE,KAAK;EACV,IAAI,EAAE,IAAI;EACV,IAAI,EAAE,IAAI;EACV,KAAK,EAAE;AACX,CAAC;AAED,OAAO,IAAMC,qBAAqB,GAAG,SAAxBA,qBAAqB,CAAIC,MAAc;EAAA,OAAaH,gBAAgB,CAACG,MAAM,CAAC,IAAI,CAAChC,6BAA6B;AAAA;AAC3H,OAAO,IAAMiC,qBAAqB,GAAG,SAAxBA,qBAAqB,CAAID,MAAc;EAAA,OAAaF,gBAAgB,CAACE,MAAM,CAAC,IAAIF,gBAAgB,CAAC,CAAC9B,6BAA6B,CAAC;AAAA;AAE7I,OAAO,IAAMkC,kBAAkB,GAAG,SAArBA,kBAAkB,CAAIC,QAAgB,EAAEC,YAAoB;EAAA,OAAM;IAC3EX,QAAQ,EAAE,WACHU,QAAQ,oBAAUC,YAAY;EAEzC,CAAC;AAAA,CAAC"},"metadata":{},"sourceType":"module"}