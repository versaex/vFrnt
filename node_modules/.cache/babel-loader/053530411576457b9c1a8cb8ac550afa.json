{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Elton\\\\OneDrive\\\\Desktop\\\\baseapp-2024\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Elton\\\\OneDrive\\\\Desktop\\\\baseapp-2024\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nexport var countDecimals = function countDecimals(value) {\n  if (!value || Math.floor(value) === value) {\n    return 0;\n  }\n  var decimalPart = value.toString().split('.')[1];\n  return decimalPart ? decimalPart.length : 0;\n};\nexport var FilterPriceCustomStep = /*#__PURE__*/function () {\n  function FilterPriceCustomStep(filter) {\n    _classCallCheck(this, FilterPriceCustomStep);\n    this.filter = void 0;\n    this.filter = filter;\n  }\n  _createClass(FilterPriceCustomStep, [{\n    key: \"validatePriceStep\",\n    value: function validatePriceStep(price) {\n      var currentValidation = {\n        valid: true,\n        priceStep: 0\n      };\n      var nextIndex = this.filter.rules.findIndex(function (step) {\n        return step && +step.limit > price;\n      });\n      var zeroIndex = this.filter.rules.findIndex(function (step) {\n        return step && +step.limit === 0;\n      });\n      var currentLimit = nextIndex >= 0 ? this.filter.rules[nextIndex] : zeroIndex ? this.filter.rules[zeroIndex] : null;\n      if (currentLimit) {\n        var priceDecimals = countDecimals(price);\n        var stepDecimals = countDecimals(currentLimit.step);\n        var targetCoefficient = priceDecimals > stepDecimals ? priceDecimals : stepDecimals;\n        var validStepCoefficient = targetCoefficient ? Math.pow(10, targetCoefficient) : 1;\n        currentValidation.valid = !(+(validStepCoefficient * price).toFixed(0) % (validStepCoefficient * +currentLimit.step));\n        currentValidation.priceStep = !currentValidation.valid ? +currentLimit.step : 0;\n      }\n      return currentValidation;\n    }\n  }]);\n  return FilterPriceCustomStep;\n}();","map":{"version":3,"names":["countDecimals","value","Math","floor","decimalPart","toString","split","length","FilterPriceCustomStep","filter","price","currentValidation","valid","priceStep","nextIndex","rules","findIndex","step","limit","zeroIndex","currentLimit","priceDecimals","stepDecimals","targetCoefficient","validStepCoefficient","toFixed"],"sources":["C:/Users/Elton/OneDrive/Desktop/baseapp-2024/src/filters/FilterPrice/FilterPriceCustomStep.ts"],"sourcesContent":["import { MarketFilterCustomStep } from '../../modules';\nimport { FilterPrice, PriceValidation } from './';\n\nexport const countDecimals = (value): number => {\n    if (!value || Math.floor(value) === value) { return 0; }\n    const decimalPart = value.toString().split('.')[1];\n\n    return decimalPart ? decimalPart.length : 0;\n};\n\nexport class FilterPriceCustomStep implements FilterPrice {\n    public filter: MarketFilterCustomStep;\n\n    constructor(filter: MarketFilterCustomStep) {\n        this.filter = filter;\n    }\n\n    public validatePriceStep(price: number): PriceValidation {\n        const currentValidation: PriceValidation = { valid: true, priceStep: 0 };\n        const nextIndex = this.filter.rules.findIndex(step => step && +step.limit > price);\n        const zeroIndex = this.filter.rules.findIndex(step => step && +step.limit === 0);\n\n        const currentLimit = nextIndex >= 0 ? (\n            this.filter.rules[nextIndex]\n        ) : (\n            zeroIndex ? this.filter.rules[zeroIndex] : null\n        );\n\n        if (currentLimit) {\n            const priceDecimals = countDecimals(price);\n            const stepDecimals = countDecimals(currentLimit.step);\n            const targetCoefficient = priceDecimals > stepDecimals ? priceDecimals : stepDecimals;\n            const validStepCoefficient = targetCoefficient ? 10 ** targetCoefficient : 1;\n\n            currentValidation.valid = !(+(validStepCoefficient * price).toFixed(0) % (validStepCoefficient * +currentLimit.step));\n            currentValidation.priceStep = !currentValidation.valid ? +currentLimit.step : 0;\n        }\n\n        return currentValidation;\n    }\n}\n"],"mappings":";;AAGA,OAAO,IAAMA,aAAa,GAAG,SAAhBA,aAAa,CAAIC,KAAK,EAAa;EAC5C,IAAI,CAACA,KAAK,IAAIC,IAAI,CAACC,KAAK,CAACF,KAAK,CAAC,KAAKA,KAAK,EAAE;IAAE,OAAO,CAAC;EAAE;EACvD,IAAMG,WAAW,GAAGH,KAAK,CAACI,QAAQ,EAAE,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;EAElD,OAAOF,WAAW,GAAGA,WAAW,CAACG,MAAM,GAAG,CAAC;AAC/C,CAAC;AAED,WAAaC,qBAAqB;EAG9B,+BAAYC,MAA8B,EAAE;IAAA;IAAA,KAFrCA,MAAM;IAGT,IAAI,CAACA,MAAM,GAAGA,MAAM;EACxB;EAAC;IAAA;IAAA,OAED,2BAAyBC,KAAa,EAAmB;MACrD,IAAMC,iBAAkC,GAAG;QAAEC,KAAK,EAAE,IAAI;QAAEC,SAAS,EAAE;MAAE,CAAC;MACxE,IAAMC,SAAS,GAAG,IAAI,CAACL,MAAM,CAACM,KAAK,CAACC,SAAS,CAAC,UAAAC,IAAI;QAAA,OAAIA,IAAI,IAAI,CAACA,IAAI,CAACC,KAAK,GAAGR,KAAK;MAAA,EAAC;MAClF,IAAMS,SAAS,GAAG,IAAI,CAACV,MAAM,CAACM,KAAK,CAACC,SAAS,CAAC,UAAAC,IAAI;QAAA,OAAIA,IAAI,IAAI,CAACA,IAAI,CAACC,KAAK,KAAK,CAAC;MAAA,EAAC;MAEhF,IAAME,YAAY,GAAGN,SAAS,IAAI,CAAC,GAC/B,IAAI,CAACL,MAAM,CAACM,KAAK,CAACD,SAAS,CAAC,GAE5BK,SAAS,GAAG,IAAI,CAACV,MAAM,CAACM,KAAK,CAACI,SAAS,CAAC,GAAG,IAC9C;MAED,IAAIC,YAAY,EAAE;QACd,IAAMC,aAAa,GAAGrB,aAAa,CAACU,KAAK,CAAC;QAC1C,IAAMY,YAAY,GAAGtB,aAAa,CAACoB,YAAY,CAACH,IAAI,CAAC;QACrD,IAAMM,iBAAiB,GAAGF,aAAa,GAAGC,YAAY,GAAGD,aAAa,GAAGC,YAAY;QACrF,IAAME,oBAAoB,GAAGD,iBAAiB,YAAG,EAAE,EAAIA,iBAAiB,IAAG,CAAC;QAE5EZ,iBAAiB,CAACC,KAAK,GAAG,EAAE,CAAC,CAACY,oBAAoB,GAAGd,KAAK,EAAEe,OAAO,CAAC,CAAC,CAAC,IAAID,oBAAoB,GAAG,CAACJ,YAAY,CAACH,IAAI,CAAC,CAAC;QACrHN,iBAAiB,CAACE,SAAS,GAAG,CAACF,iBAAiB,CAACC,KAAK,GAAG,CAACQ,YAAY,CAACH,IAAI,GAAG,CAAC;MACnF;MAEA,OAAON,iBAAiB;IAC5B;EAAC;EAAA;AAAA"},"metadata":{},"sourceType":"module"}