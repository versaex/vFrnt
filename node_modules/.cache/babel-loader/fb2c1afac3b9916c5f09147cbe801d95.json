{"ast":null,"code":"import _toConsumableArray from \"C:\\\\Users\\\\Elton\\\\OneDrive\\\\Desktop\\\\baseapp-2024\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"C:\\\\Users\\\\Elton\\\\OneDrive\\\\Desktop\\\\baseapp-2024\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Elton\\\\OneDrive\\\\Desktop\\\\baseapp-2024\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"C:\\\\Users\\\\Elton\\\\OneDrive\\\\Desktop\\\\baseapp-2024\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\Elton\\\\OneDrive\\\\Desktop\\\\baseapp-2024\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\Elton\\\\OneDrive\\\\Desktop\\\\baseapp-2024\\\\src\\\\components\\\\Markets\\\\index.tsx\";\nimport classnames from 'classnames';\nimport * as React from 'react';\nimport { FilterInput, Table } from '../';\nexport var Markets = /*#__PURE__*/function (_React$Component) {\n  _inherits(Markets, _React$Component);\n  var _super = _createSuper(Markets);\n  function Markets(props) {\n    var _this;\n    _classCallCheck(this, Markets);\n    _this = _super.call(this, props);\n    _this.defaultHeaders = ['Pair', 'Price', '24h Change'];\n    _this.searchFilter = function (row, searchKey) {\n      _this.setState({\n        searchKey: searchKey\n      });\n      return row[0].toLowerCase().includes(searchKey.toLowerCase());\n    };\n    _this.handleFilter = function (result) {\n      _this.setState({\n        filteredData: _toConsumableArray(result)\n      });\n    };\n    _this.mapRows = function (cell) {\n      var isChangeValue = typeof cell === 'string' && (cell.charAt(0) === '-' || cell.charAt(0) === '+');\n      return isChangeValue ? _this.renderChange(cell) : cell;\n    };\n    _this.filterType = function (headerKey, searchKey) {\n      return function (item) {\n        var typeIndex = _this.props.headers ? _this.props.headers.indexOf(headerKey) : _this.defaultHeaders.indexOf(headerKey);\n        return item[typeIndex].includes(searchKey);\n      };\n    };\n    _this.getMarketFromDataRow = function (market) {\n      return market[0];\n    };\n    _this.transformCurrencyToFilter = function (currency) {\n      return {\n        name: currency,\n        filter: _this.filterType('Pair', currency)\n      };\n    };\n    _this.state = {\n      filteredData: props.data,\n      searchKey: ''\n    };\n    return _this;\n  }\n  _createClass(Markets, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var _this2 = this;\n      if (nextProps.data !== this.props.data) {\n        this.setState({\n          filteredData: nextProps.data.filter(function (w) {\n            return w[0].toLowerCase().includes(_this2.state.searchKey.toLowerCase());\n          })\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n      var filteredData = this.state.filteredData;\n      var _this$props = this.props,\n        _this$props$filters = _this$props.filters,\n        filters = _this$props$filters === void 0 ? true : _this$props$filters,\n        headers = _this$props.headers,\n        title = _this$props.title,\n        _this$props$filterPla = _this$props.filterPlaceholder,\n        filterPlaceholder = _this$props$filterPla === void 0 ? '' : _this$props$filterPla,\n        rowKeyIndex = _this$props.rowKeyIndex,\n        selectedKey = _this$props.selectedKey;\n      var tableData = filteredData.length > 0 ? filteredData : [['', '', '']];\n      tableData = tableData.map(function (row) {\n        return row.map(_this3.mapRows);\n      });\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"cr-markets\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Table, {\n        data: tableData,\n        rowKeyIndex: rowKeyIndex,\n        selectedKey: selectedKey,\n        filters: filters ? this.filters : [],\n        header: headers ? headers : this.defaultHeaders,\n        onSelect: this.props.onSelect,\n        titleComponent: title ? title : 'Markets',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(FilterInput, {\n        data: this.props.data,\n        onFilter: this.handleFilter,\n        filter: this.searchFilter,\n        placeholder: filterPlaceholder,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 17\n        }\n      }));\n    }\n  }, {\n    key: \"renderChange\",\n    value: function renderChange(cell) {\n      var isItChangeValue = function isItChangeValue(c) {\n        return c.search('\\\\+') ? 'negative' : 'positive';\n      };\n      var className = classnames('', {\n        __positive: isItChangeValue(cell) === 'positive',\n        __negative: isItChangeValue(cell) === 'negative'\n      });\n      return /*#__PURE__*/React.createElement(\"span\", {\n        className: className,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 16\n        }\n      }, cell);\n    }\n  }, {\n    key: \"filters\",\n    get: function get() {\n      var data = this.props.data;\n      var currencyFilters = data && data.length > 0 ? this.props.data.map(this.getMarketFromDataRow).reduce(this.createUniqueCurrencies, []).map(this.transformCurrencyToFilter) : [];\n      return [{\n        name: 'All',\n        filter: this.filterType('Pair', '')\n      }].concat(_toConsumableArray(currencyFilters));\n    }\n  }, {\n    key: \"createUniqueCurrencies\",\n    value: function createUniqueCurrencies(currencies, market) {\n      var isCurrencyUnique = function isCurrencyUnique(currency) {\n        return !currencies.includes(currency);\n      };\n      var marketCurrencies = market.split('/').map(function (c) {\n        return c.trim();\n      });\n      var uniqueCurrencies = marketCurrencies.filter(isCurrencyUnique);\n      return currencies.concat(uniqueCurrencies);\n    }\n  }]);\n  return Markets;\n}(React.Component);","map":{"version":3,"names":["classnames","React","FilterInput","Table","Markets","props","defaultHeaders","searchFilter","row","searchKey","setState","toLowerCase","includes","handleFilter","result","filteredData","mapRows","cell","isChangeValue","charAt","renderChange","filterType","headerKey","item","typeIndex","headers","indexOf","getMarketFromDataRow","market","transformCurrencyToFilter","currency","name","filter","state","data","nextProps","w","filters","title","filterPlaceholder","rowKeyIndex","selectedKey","tableData","length","map","onSelect","isItChangeValue","c","search","className","__positive","__negative","currencyFilters","reduce","createUniqueCurrencies","currencies","isCurrencyUnique","marketCurrencies","split","trim","uniqueCurrencies","concat","Component"],"sources":["C:/Users/Elton/OneDrive/Desktop/baseapp-2024/src/components/Markets/index.tsx"],"sourcesContent":["import classnames from 'classnames';\nimport * as React from 'react';\nimport { CellData, FilterInput, Table } from '../';\n\nexport interface MarketsProps {\n    /**\n     * List of markets data\n     */\n    data: CellData[][];\n    /**\n     * Row's unique key, could be a number - element's index in data\n     */\n    rowKeyIndex?: number;\n    /**\n     * Key of selected row, could be a string\n     */\n    selectedKey?: string;\n    /**\n     * Callback that is called when a market is selected\n     */\n    onSelect: (marketKey: string) => void;\n    /**\n     * Defines whether to show filters or not\n     * @default true\n     */\n    filters?: boolean;\n    /**\n     * List of headers for table\n     */\n    headers?: string[];\n    /**\n     * Title of widget\n     */\n    title?: string;\n    /**\n     * Value for FilterInput placeholder\n     */\n    filterPlaceholder?: string;\n}\n\nexport interface MarketsState {\n    /**\n     * Keeps filtered data\n     */\n    filteredData: CellData[][];\n    /**\n     * Keeps search key\n     */\n    searchKey: string;\n}\n\nexport class Markets extends React.Component<MarketsProps, MarketsState> {\n    constructor(props: MarketsProps) {\n        super(props);\n\n        this.state = {\n            filteredData: props.data,\n            searchKey: '',\n        };\n    }\n\n    private defaultHeaders: string[] = ['Pair', 'Price', '24h Change'];\n\n    public componentWillReceiveProps(nextProps: MarketsProps) {\n        if (nextProps.data !== this.props.data) {\n            this.setState({\n                filteredData: nextProps.data.filter(w => (w[0] as string).toLowerCase().includes(this.state.searchKey.toLowerCase())),\n            });\n        }\n    }\n\n    public render() {\n        const { filteredData } = this.state;\n        const { filters = true, headers, title, filterPlaceholder = '', rowKeyIndex, selectedKey } = this.props;\n        let tableData = filteredData.length > 0\n            ? filteredData\n            : [['', '', '']];\n        tableData = tableData.map(row => row.map(this.mapRows));\n\n        return (\n            <div className=\"cr-markets\">\n                <Table\n                    data={tableData}\n                    rowKeyIndex={rowKeyIndex}\n                    selectedKey={selectedKey}\n                    filters={filters ? this.filters : []}\n                    header={headers ? headers : this.defaultHeaders}\n                    onSelect={this.props.onSelect}\n                    titleComponent={title ? title : 'Markets'}\n                />\n                <FilterInput\n                    data={this.props.data}\n                    onFilter={this.handleFilter}\n                    filter={this.searchFilter}\n                    placeholder={filterPlaceholder}\n                />\n            </div>\n        );\n    }\n\n    public searchFilter = (row: CellData[], searchKey: string) => {\n        this.setState({\n            searchKey: searchKey,\n        });\n\n        return (row[0] as string).toLowerCase().includes(searchKey.toLowerCase());\n    };\n\n    public handleFilter = (result: object[]) => {\n        this.setState({\n            filteredData: [...result] as CellData[][],\n        });\n    };\n\n    private renderChange(cell: string) {\n        const isItChangeValue = (c: string) => {\n            return c.search('\\\\+') ? 'negative' : 'positive';\n        };\n\n        const className = classnames('', {\n            __positive: isItChangeValue(cell) === 'positive',\n            __negative: isItChangeValue(cell) === 'negative',\n        });\n\n        return <span className={className}>{cell}</span>;\n    }\n\n    private mapRows = (cell: CellData) => {\n        const isChangeValue = typeof(cell) === 'string' && (cell.charAt(0) === '-' || cell.charAt(0) === '+');\n\n        return isChangeValue ? this.renderChange(cell as string) : cell;\n    };\n\n    private filterType = (headerKey: string, searchKey: string) => (item: CellData[]) => {\n        const typeIndex = this.props.headers ? this.props.headers.indexOf(headerKey) : this.defaultHeaders.indexOf(headerKey);\n\n        return (item[typeIndex] as string).includes(searchKey);\n    };\n\n    private get filters() {\n        const { data } = this.props;\n\n        const currencyFilters = data && data.length > 0\n            ? this.props.data\n                .map(this.getMarketFromDataRow)\n                .reduce(this.createUniqueCurrencies, [])\n                .map(this.transformCurrencyToFilter)\n            : [];\n\n        return [\n            {\n                name: 'All',\n                filter: this.filterType('Pair', ''),\n            },\n            ...currencyFilters,\n        ];\n    }\n\n    private getMarketFromDataRow = (market: React.ReactNode[]) => market[0] as string;\n\n    private createUniqueCurrencies(currencies: string[], market: string) {\n        const isCurrencyUnique = (currency: string) => !currencies.includes(currency);\n\n        const marketCurrencies = market.split('/').map((c: string) => c.trim());\n        const uniqueCurrencies = marketCurrencies.filter(isCurrencyUnique);\n\n        return currencies.concat(uniqueCurrencies);\n    }\n\n    private transformCurrencyToFilter = (currency: string) => ({\n        name: currency,\n        filter: this.filterType('Pair', currency),\n    });\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}