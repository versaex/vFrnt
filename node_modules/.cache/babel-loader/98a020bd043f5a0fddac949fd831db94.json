{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\Elton\\\\OneDrive\\\\Desktop\\\\baseapp-2024\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"C:\\\\Users\\\\Elton\\\\OneDrive\\\\Desktop\\\\baseapp-2024\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport { KLINE_DATA, KLINE_ERROR, KLINE_FETCH, KLINE_PUSH, KLINE_UPDATE_PERIOD, KLINE_UPDATE_TIME_RANGE } from './constants';\nexport var klineArrayToObject = function klineArrayToObject(el) {\n  var _el$map = el.map(function (e) {\n      switch (typeof e) {\n        case 'number':\n          return e;\n        case 'string':\n          return Number.parseFloat(e);\n        default:\n          throw new Error(\"unexpected type \".concat(typeof e, \" in kline: \").concat(el));\n      }\n    }),\n    _el$map2 = _slicedToArray(_el$map, 6),\n    time = _el$map2[0],\n    open = _el$map2[1],\n    high = _el$map2[2],\n    low = _el$map2[3],\n    close = _el$map2[4],\n    volume = _el$map2[5];\n  return {\n    time: time * 1e3,\n    open: open,\n    high: high,\n    low: low,\n    close: close,\n    volume: volume\n  };\n};\nexport var initialKlineState = {\n  last: undefined,\n  marketId: undefined,\n  period: undefined,\n  loading: false,\n  data: [],\n  range: {\n    from: 0,\n    to: 0\n  }\n};\nexport var klineReducer = function klineReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialKlineState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case KLINE_PUSH:\n      var _action$payload = action.payload,\n        kline = _action$payload.kline,\n        marketId = _action$payload.marketId,\n        period = _action$payload.period;\n      return _objectSpread(_objectSpread({}, state), {}, {\n        marketId: marketId,\n        period: period,\n        last: klineArrayToObject(kline)\n      });\n    case KLINE_FETCH:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        loading: true\n      });\n    case KLINE_DATA:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        loading: false,\n        data: action.payload\n      });\n    case KLINE_UPDATE_TIME_RANGE:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        range: action.payload\n      });\n    case KLINE_UPDATE_PERIOD:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        period: action.payload\n      });\n    case KLINE_ERROR:\n      return initialKlineState;\n    default:\n      return state;\n  }\n};","map":{"version":3,"names":["KLINE_DATA","KLINE_ERROR","KLINE_FETCH","KLINE_PUSH","KLINE_UPDATE_PERIOD","KLINE_UPDATE_TIME_RANGE","klineArrayToObject","el","map","e","Number","parseFloat","Error","time","open","high","low","close","volume","initialKlineState","last","undefined","marketId","period","loading","data","range","from","to","klineReducer","state","action","type","payload","kline"],"sources":["C:/Users/Elton/OneDrive/Desktop/baseapp-2024/src/modules/public/kline/reducer.ts"],"sourcesContent":["import { CommonState } from '../../types';\nimport { KlineActions, KlineRawElement } from './actions';\nimport {\n    KLINE_DATA,\n    KLINE_ERROR,\n    KLINE_FETCH,\n    KLINE_PUSH,\n    KLINE_UPDATE_PERIOD,\n    KLINE_UPDATE_TIME_RANGE,\n} from './constants';\nimport { KlineEvent } from './types';\n\nexport interface KlineState extends CommonState {\n    last?: KlineEvent;\n    marketId?: string;\n    period?: string;\n    loading: boolean;\n    data: any;\n    range: {\n        from: number;\n        to: number;\n    };\n}\n\nexport const klineArrayToObject = (el: KlineRawElement[]): KlineEvent => {\n    const [time, open, high, low, close, volume] = el.map((e: KlineRawElement) => {\n        switch (typeof e) {\n            case 'number':\n                return e;\n            case 'string':\n                return Number.parseFloat(e);\n            default:\n                throw (new Error(`unexpected type ${typeof e} in kline: ${el}`));\n        }\n    });\n\n    return {\n        time: time * 1e3,\n        open,\n        high,\n        low,\n        close,\n        volume,\n    };\n};\n\nexport const initialKlineState: KlineState = {\n    last: undefined,\n    marketId: undefined,\n    period: undefined,\n    loading: false,\n    data: [],\n    range: {\n        from: 0,\n        to: 0,\n    },\n};\n\nexport const klineReducer = (state = initialKlineState, action: KlineActions): KlineState => {\n    switch (action.type) {\n        case KLINE_PUSH:\n            const { kline, marketId, period } = action.payload;\n\n            return {\n                ...state,\n                marketId,\n                period,\n                last: klineArrayToObject(kline),\n            };\n        case KLINE_FETCH:\n            return {\n                ...state,\n                loading: true,\n            };\n        case KLINE_DATA:\n            return {\n                ...state,\n                loading: false,\n                data: action.payload,\n            };\n        case KLINE_UPDATE_TIME_RANGE:\n            return {\n                ...state,\n                range: action.payload,\n            };\n        case KLINE_UPDATE_PERIOD:\n            return {\n                ...state,\n                period: action.payload,\n            };\n        case KLINE_ERROR:\n            return initialKlineState;\n        default:\n            return state;\n    }\n};\n"],"mappings":";;AAEA,SACIA,UAAU,EACVC,WAAW,EACXC,WAAW,EACXC,UAAU,EACVC,mBAAmB,EACnBC,uBAAuB,QACpB,aAAa;AAepB,OAAO,IAAMC,kBAAkB,GAAG,SAArBA,kBAAkB,CAAIC,EAAqB,EAAiB;EACrE,cAA+CA,EAAE,CAACC,GAAG,CAAC,UAACC,CAAkB,EAAK;MAC1E,QAAQ,OAAOA,CAAC;QACZ,KAAK,QAAQ;UACT,OAAOA,CAAC;QACZ,KAAK,QAAQ;UACT,OAAOC,MAAM,CAACC,UAAU,CAACF,CAAC,CAAC;QAC/B;UACI,MAAO,IAAIG,KAAK,2BAAoB,OAAOH,CAAC,wBAAcF,EAAE,EAAG;MAAE;IAE7E,CAAC,CAAC;IAAA;IATKM,IAAI;IAAEC,IAAI;IAAEC,IAAI;IAAEC,GAAG;IAAEC,KAAK;IAAEC,MAAM;EAW3C,OAAO;IACHL,IAAI,EAAEA,IAAI,GAAG,GAAG;IAChBC,IAAI,EAAJA,IAAI;IACJC,IAAI,EAAJA,IAAI;IACJC,GAAG,EAAHA,GAAG;IACHC,KAAK,EAALA,KAAK;IACLC,MAAM,EAANA;EACJ,CAAC;AACL,CAAC;AAED,OAAO,IAAMC,iBAA6B,GAAG;EACzCC,IAAI,EAAEC,SAAS;EACfC,QAAQ,EAAED,SAAS;EACnBE,MAAM,EAAEF,SAAS;EACjBG,OAAO,EAAE,KAAK;EACdC,IAAI,EAAE,EAAE;EACRC,KAAK,EAAE;IACHC,IAAI,EAAE,CAAC;IACPC,EAAE,EAAE;EACR;AACJ,CAAC;AAED,OAAO,IAAMC,YAAY,GAAG,SAAfA,YAAY,GAAoE;EAAA,IAAhEC,KAAK,uEAAGX,iBAAiB;EAAA,IAAEY,MAAoB;EACxE,QAAQA,MAAM,CAACC,IAAI;IACf,KAAK7B,UAAU;MACX,sBAAoC4B,MAAM,CAACE,OAAO;QAA1CC,KAAK,mBAALA,KAAK;QAAEZ,QAAQ,mBAARA,QAAQ;QAAEC,MAAM,mBAANA,MAAM;MAE/B,uCACOO,KAAK;QACRR,QAAQ,EAARA,QAAQ;QACRC,MAAM,EAANA,MAAM;QACNH,IAAI,EAAEd,kBAAkB,CAAC4B,KAAK;MAAC;IAEvC,KAAKhC,WAAW;MACZ,uCACO4B,KAAK;QACRN,OAAO,EAAE;MAAI;IAErB,KAAKxB,UAAU;MACX,uCACO8B,KAAK;QACRN,OAAO,EAAE,KAAK;QACdC,IAAI,EAAEM,MAAM,CAACE;MAAO;IAE5B,KAAK5B,uBAAuB;MACxB,uCACOyB,KAAK;QACRJ,KAAK,EAAEK,MAAM,CAACE;MAAO;IAE7B,KAAK7B,mBAAmB;MACpB,uCACO0B,KAAK;QACRP,MAAM,EAAEQ,MAAM,CAACE;MAAO;IAE9B,KAAKhC,WAAW;MACZ,OAAOkB,iBAAiB;IAC5B;MACI,OAAOW,KAAK;EAAC;AAEzB,CAAC"},"metadata":{},"sourceType":"module"}