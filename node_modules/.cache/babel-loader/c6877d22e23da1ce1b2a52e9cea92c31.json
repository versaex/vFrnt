{"ast":null,"code":"import { FilterPriceCustomStep } from './FilterPriceCustomStep';\nimport { FilterPriceSignificantDigit } from './FilterPriceSignificantDigit';\nexport var buildFilterPrice = function buildFilterPrice(filter) {\n  switch (filter.type) {\n    case 'significant_digits':\n      return new FilterPriceSignificantDigit(filter);\n    case 'custom_price_steps':\n      return new FilterPriceCustomStep(filter);\n    default:\n      throw new Error(\"Unknown filter \".concat(filter.type));\n  }\n};\nexport var validatePriceStep = function validatePriceStep() {\n  var price = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  var filters = arguments.length > 1 ? arguments[1] : undefined;\n  if (filters && filters.length) {\n    return filters.reduce(function (result, filter) {\n      var currentValidation = filter.validatePriceStep(+price);\n      if (!currentValidation.valid) {\n        result.valid = false;\n        if (currentValidation.priceStep > result.priceStep) {\n          result.priceStep = currentValidation.priceStep;\n        }\n      }\n      return result;\n    }, {\n      valid: true,\n      priceStep: 0\n    });\n  }\n  return {\n    valid: true,\n    priceStep: 0\n  };\n};","map":{"version":3,"names":["FilterPriceCustomStep","FilterPriceSignificantDigit","buildFilterPrice","filter","type","Error","validatePriceStep","price","filters","length","reduce","result","currentValidation","valid","priceStep"],"sources":["C:/Users/Elton/OneDrive/Desktop/baseapp-2024/src/filters/FilterPrice/index.ts"],"sourcesContent":["import {\n    MarketFilter,\n    MarketFilterCustomStep,\n    MarketFilterSignificantDigit,\n} from '../../modules';\nimport { FilterPriceCustomStep } from './FilterPriceCustomStep';\nimport { FilterPriceSignificantDigit } from './FilterPriceSignificantDigit';\n\nexport interface PriceValidation {\n    valid: boolean;\n    priceStep: number;\n}\n\nexport interface FilterPrice {\n    validatePriceStep(price: number): PriceValidation;\n}\n\nexport const buildFilterPrice = (filter: MarketFilter) : FilterPrice => {\n    switch (filter.type) {\n        case 'significant_digits':\n            return new FilterPriceSignificantDigit(filter as MarketFilterSignificantDigit);\n        case 'custom_price_steps':\n            return new FilterPriceCustomStep(filter as MarketFilterCustomStep);\n        default:\n            throw new Error(`Unknown filter ${filter.type}`);\n    }\n};\n\nexport const validatePriceStep = (price: string | number = 0, filters: FilterPrice[]): PriceValidation => {\n    if (filters && filters.length) {\n        return filters.reduce((result, filter) => {\n            const currentValidation = filter.validatePriceStep(+price);\n\n            if (!currentValidation.valid) {\n                result.valid = false;\n                if (currentValidation.priceStep > result.priceStep) {\n                    result.priceStep = currentValidation.priceStep;\n                }\n            }\n\n            return result;\n        }, { valid: true, priceStep: 0 } as PriceValidation);\n    }\n\n    return { valid: true, priceStep: 0 } as PriceValidation;\n};\n"],"mappings":"AAKA,SAASA,qBAAqB,QAAQ,yBAAyB;AAC/D,SAASC,2BAA2B,QAAQ,+BAA+B;AAW3E,OAAO,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAgB,CAAIC,MAAoB,EAAmB;EACpE,QAAQA,MAAM,CAACC,IAAI;IACf,KAAK,oBAAoB;MACrB,OAAO,IAAIH,2BAA2B,CAACE,MAAM,CAAiC;IAClF,KAAK,oBAAoB;MACrB,OAAO,IAAIH,qBAAqB,CAACG,MAAM,CAA2B;IACtE;MACI,MAAM,IAAIE,KAAK,0BAAmBF,MAAM,CAACC,IAAI,EAAG;EAAC;AAE7D,CAAC;AAED,OAAO,IAAME,iBAAiB,GAAG,SAApBA,iBAAiB,GAA4E;EAAA,IAAxEC,KAAsB,uEAAG,CAAC;EAAA,IAAEC,OAAsB;EAChF,IAAIA,OAAO,IAAIA,OAAO,CAACC,MAAM,EAAE;IAC3B,OAAOD,OAAO,CAACE,MAAM,CAAC,UAACC,MAAM,EAAER,MAAM,EAAK;MACtC,IAAMS,iBAAiB,GAAGT,MAAM,CAACG,iBAAiB,CAAC,CAACC,KAAK,CAAC;MAE1D,IAAI,CAACK,iBAAiB,CAACC,KAAK,EAAE;QAC1BF,MAAM,CAACE,KAAK,GAAG,KAAK;QACpB,IAAID,iBAAiB,CAACE,SAAS,GAAGH,MAAM,CAACG,SAAS,EAAE;UAChDH,MAAM,CAACG,SAAS,GAAGF,iBAAiB,CAACE,SAAS;QAClD;MACJ;MAEA,OAAOH,MAAM;IACjB,CAAC,EAAE;MAAEE,KAAK,EAAE,IAAI;MAAEC,SAAS,EAAE;IAAE,CAAC,CAAoB;EACxD;EAEA,OAAO;IAAED,KAAK,EAAE,IAAI;IAAEC,SAAS,EAAE;EAAE,CAAC;AACxC,CAAC"},"metadata":{},"sourceType":"module"}