{"ast":null,"code":"import _toConsumableArray from \"C:\\\\Users\\\\Elton\\\\OneDrive\\\\Desktop\\\\baseapp-2024\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"C:\\\\Users\\\\Elton\\\\OneDrive\\\\Desktop\\\\baseapp-2024\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport { sortAsks, sortBids } from './sortByPrice';\nexport var handleIncrementalUpdate = function handleIncrementalUpdate(depthOld, newLevel, type) {\n  if (newLevel.length !== 2) {\n    return depthOld;\n  }\n  var index = depthOld.findIndex(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 1),\n      price = _ref2[0];\n    return +price === +newLevel[0];\n  });\n  if (index === -1 && +newLevel[1]) {\n    var data = [].concat(_toConsumableArray(depthOld), [newLevel]);\n    if (type === 'asks') {\n      return sortAsks(data);\n    }\n    return sortBids(data);\n  }\n  var result = _toConsumableArray(depthOld);\n  if (Number(newLevel[1]) !== 0) {\n    result[index] = newLevel;\n  } else {\n    result.splice(index, 1);\n  }\n  return result;\n};\nexport var handleIncrementalUpdateArray = function handleIncrementalUpdateArray(depthOld, newLevels, type) {\n  var prices = {};\n\n  // tslint:disable-next-line:prefer-for-of\n  for (var i = 0; i < newLevels.length; i += 1) {\n    prices[newLevels[i][0]] = newLevels[i][1];\n  }\n  var rest = depthOld.filter(function (_ref3) {\n    var _ref4 = _slicedToArray(_ref3, 1),\n      price = _ref4[0];\n    return !prices[price];\n  });\n  var newData = newLevels.filter(function (_ref5) {\n    var _ref6 = _slicedToArray(_ref5, 2),\n      _ = _ref6[0],\n      amount = _ref6[1];\n    return Number(amount) !== 0;\n  });\n  var result = [].concat(_toConsumableArray(rest), _toConsumableArray(newData));\n  if (type === 'asks') {\n    return sortAsks(result);\n  }\n  return sortBids(result);\n};","map":{"version":3,"names":["sortAsks","sortBids","handleIncrementalUpdate","depthOld","newLevel","type","length","index","findIndex","price","data","result","Number","splice","handleIncrementalUpdateArray","newLevels","prices","i","rest","filter","newData","_","amount"],"sources":["C:/Users/Elton/OneDrive/Desktop/baseapp-2024/src/helpers/handleIncrementalUpdate.ts"],"sourcesContent":["import { sortAsks, sortBids } from './sortByPrice';\n\nexport const handleIncrementalUpdate = (depthOld: string[][], newLevel: string[], type: string): string[][] => {\n    if (newLevel.length !== 2) {\n        return depthOld;\n    }\n\n    const index = depthOld.findIndex(([price]) => +price === +newLevel[0]);\n\n    if (index === -1 && +newLevel[1]) {\n        const data = [...depthOld, newLevel];\n        if (type === 'asks') {\n            return sortAsks(data);\n        }\n\n        return sortBids(data);\n    }\n\n    const result = [...depthOld];\n    if (Number(newLevel[1]) !== 0) {\n        result[index] = newLevel;\n    } else {\n        result.splice(index, 1);\n    }\n\n    return result;\n};\n\nexport const handleIncrementalUpdateArray = (depthOld: string[][], newLevels: string[][], type: string): string[][] => {\n    const prices = {};\n\n    // tslint:disable-next-line:prefer-for-of\n    for (let i = 0; i < newLevels.length; i += 1) {\n        prices[newLevels[i][0]] = newLevels[i][1];\n    }\n\n    const rest = depthOld.filter(([price]) => !prices[price]);\n    const newData = newLevels.filter(([_, amount]) => Number(amount) !== 0);\n    const result = [...rest, ...newData];\n\n    if (type === 'asks') {\n        return sortAsks(result);\n    }\n\n    return sortBids(result);\n};\n"],"mappings":";;AAAA,SAASA,QAAQ,EAAEC,QAAQ,QAAQ,eAAe;AAElD,OAAO,IAAMC,uBAAuB,GAAG,SAA1BA,uBAAuB,CAAIC,QAAoB,EAAEC,QAAkB,EAAEC,IAAY,EAAiB;EAC3G,IAAID,QAAQ,CAACE,MAAM,KAAK,CAAC,EAAE;IACvB,OAAOH,QAAQ;EACnB;EAEA,IAAMI,KAAK,GAAGJ,QAAQ,CAACK,SAAS,CAAC;IAAA;MAAEC,KAAK;IAAA,OAAM,CAACA,KAAK,KAAK,CAACL,QAAQ,CAAC,CAAC,CAAC;EAAA,EAAC;EAEtE,IAAIG,KAAK,KAAK,CAAC,CAAC,IAAI,CAACH,QAAQ,CAAC,CAAC,CAAC,EAAE;IAC9B,IAAMM,IAAI,gCAAOP,QAAQ,IAAEC,QAAQ,EAAC;IACpC,IAAIC,IAAI,KAAK,MAAM,EAAE;MACjB,OAAOL,QAAQ,CAACU,IAAI,CAAC;IACzB;IAEA,OAAOT,QAAQ,CAACS,IAAI,CAAC;EACzB;EAEA,IAAMC,MAAM,sBAAOR,QAAQ,CAAC;EAC5B,IAAIS,MAAM,CAACR,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,EAAE;IAC3BO,MAAM,CAACJ,KAAK,CAAC,GAAGH,QAAQ;EAC5B,CAAC,MAAM;IACHO,MAAM,CAACE,MAAM,CAACN,KAAK,EAAE,CAAC,CAAC;EAC3B;EAEA,OAAOI,MAAM;AACjB,CAAC;AAED,OAAO,IAAMG,4BAA4B,GAAG,SAA/BA,4BAA4B,CAAIX,QAAoB,EAAEY,SAAqB,EAAEV,IAAY,EAAiB;EACnH,IAAMW,MAAM,GAAG,CAAC,CAAC;;EAEjB;EACA,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,SAAS,CAACT,MAAM,EAAEW,CAAC,IAAI,CAAC,EAAE;IAC1CD,MAAM,CAACD,SAAS,CAACE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAGF,SAAS,CAACE,CAAC,CAAC,CAAC,CAAC,CAAC;EAC7C;EAEA,IAAMC,IAAI,GAAGf,QAAQ,CAACgB,MAAM,CAAC;IAAA;MAAEV,KAAK;IAAA,OAAM,CAACO,MAAM,CAACP,KAAK,CAAC;EAAA,EAAC;EACzD,IAAMW,OAAO,GAAGL,SAAS,CAACI,MAAM,CAAC;IAAA;MAAEE,CAAC;MAAEC,MAAM;IAAA,OAAMV,MAAM,CAACU,MAAM,CAAC,KAAK,CAAC;EAAA,EAAC;EACvE,IAAMX,MAAM,gCAAOO,IAAI,sBAAKE,OAAO,EAAC;EAEpC,IAAIf,IAAI,KAAK,MAAM,EAAE;IACjB,OAAOL,QAAQ,CAACW,MAAM,CAAC;EAC3B;EAEA,OAAOV,QAAQ,CAACU,MAAM,CAAC;AAC3B,CAAC"},"metadata":{},"sourceType":"module"}