{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Elton\\\\OneDrive\\\\Desktop\\\\baseapp-2024\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Elton\\\\OneDrive\\\\Desktop\\\\baseapp-2024\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nexport var countMinValidPriceStep = function countMinValidPriceStep(price, digits) {\n  var clearPrice = String(+price);\n  var priceParts = clearPrice.split('.');\n  var indexOfDot = priceParts[1] ? clearPrice.indexOf('.') : priceParts[0].length;\n  if (priceParts[0] === '0') {\n    indexOfDot -= 1;\n  }\n  var minValidPrice = Math.pow(10, indexOfDot - digits);\n  if (minValidPrice < 1) {\n    minValidPrice = +minValidPrice.toFixed(digits - indexOfDot);\n  }\n  return minValidPrice;\n};\nexport var countSignificantDigits = function countSignificantDigits(value) {\n  if (value === 0) {\n    return 0;\n  }\n  return Number(value).toExponential().replace(/e[+\\-0-9]*$/, '') // remove exponential notation\n  .replace(/^0\\.?0*|\\./, '') // remove decimal point and leading zeros\n  .length;\n};\nexport var FilterPriceSignificantDigit = /*#__PURE__*/function () {\n  function FilterPriceSignificantDigit(filter) {\n    _classCallCheck(this, FilterPriceSignificantDigit);\n    this.filter = void 0;\n    this.filter = filter;\n  }\n  _createClass(FilterPriceSignificantDigit, [{\n    key: \"validatePriceStep\",\n    value: function validatePriceStep(price) {\n      var valid = countSignificantDigits(price) <= this.filter.digits;\n      var priceStep = 0;\n      if (!valid) {\n        priceStep = countMinValidPriceStep(price, this.filter.digits);\n      }\n      return {\n        valid: valid,\n        priceStep: priceStep\n      };\n    }\n  }]);\n  return FilterPriceSignificantDigit;\n}();","map":{"version":3,"names":["countMinValidPriceStep","price","digits","clearPrice","String","priceParts","split","indexOfDot","indexOf","length","minValidPrice","toFixed","countSignificantDigits","value","Number","toExponential","replace","FilterPriceSignificantDigit","filter","valid","priceStep"],"sources":["C:/Users/Elton/OneDrive/Desktop/baseapp-2024/src/filters/FilterPrice/FilterPriceSignificantDigit.ts"],"sourcesContent":["import { MarketFilterSignificantDigit } from '../../modules';\nimport { FilterPrice, PriceValidation } from './';\n\nexport const countMinValidPriceStep = (price: number | string, digits: number) => {\n    const clearPrice = String(+price);\n    const priceParts = clearPrice.split('.');\n    let indexOfDot = (priceParts[1]) ? clearPrice.indexOf('.') : priceParts[0].length;\n\n    if (priceParts[0] === '0') {\n        indexOfDot -= 1;\n    }\n\n    let minValidPrice = 10 ** (indexOfDot - digits);\n\n    if (minValidPrice < 1) {\n        minValidPrice = +(minValidPrice.toFixed(digits - indexOfDot));\n    }\n\n    return minValidPrice;\n};\n\nexport const countSignificantDigits = (value: number | string) => {\n    if (value === 0) { return 0; }\n\n    return Number(value)\n      .toExponential()\n      .replace(/e[+\\-0-9]*$/, '')  // remove exponential notation\n      .replace( /^0\\.?0*|\\./, '')   // remove decimal point and leading zeros\n      .length;\n};\n\nexport class FilterPriceSignificantDigit implements FilterPrice {\n    public filter: MarketFilterSignificantDigit;\n\n    constructor(filter: MarketFilterSignificantDigit) {\n        this.filter = filter;\n    }\n\n    public validatePriceStep(price: number): PriceValidation {\n        const valid = countSignificantDigits(price) <= this.filter.digits;\n        let priceStep = 0;\n\n        if (!valid) {\n            priceStep = countMinValidPriceStep(price, this.filter.digits);\n        }\n\n        return { valid, priceStep } as PriceValidation;\n    }\n}\n"],"mappings":";;AAGA,OAAO,IAAMA,sBAAsB,GAAG,SAAzBA,sBAAsB,CAAIC,KAAsB,EAAEC,MAAc,EAAK;EAC9E,IAAMC,UAAU,GAAGC,MAAM,CAAC,CAACH,KAAK,CAAC;EACjC,IAAMI,UAAU,GAAGF,UAAU,CAACG,KAAK,CAAC,GAAG,CAAC;EACxC,IAAIC,UAAU,GAAIF,UAAU,CAAC,CAAC,CAAC,GAAIF,UAAU,CAACK,OAAO,CAAC,GAAG,CAAC,GAAGH,UAAU,CAAC,CAAC,CAAC,CAACI,MAAM;EAEjF,IAAIJ,UAAU,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;IACvBE,UAAU,IAAI,CAAC;EACnB;EAEA,IAAIG,aAAa,YAAG,EAAE,EAAKH,UAAU,GAAGL,MAAM,CAAC;EAE/C,IAAIQ,aAAa,GAAG,CAAC,EAAE;IACnBA,aAAa,GAAG,CAAEA,aAAa,CAACC,OAAO,CAACT,MAAM,GAAGK,UAAU,CAAE;EACjE;EAEA,OAAOG,aAAa;AACxB,CAAC;AAED,OAAO,IAAME,sBAAsB,GAAG,SAAzBA,sBAAsB,CAAIC,KAAsB,EAAK;EAC9D,IAAIA,KAAK,KAAK,CAAC,EAAE;IAAE,OAAO,CAAC;EAAE;EAE7B,OAAOC,MAAM,CAACD,KAAK,CAAC,CACjBE,aAAa,EAAE,CACfC,OAAO,CAAC,aAAa,EAAE,EAAE,CAAC,CAAE;EAAA,CAC5BA,OAAO,CAAE,YAAY,EAAE,EAAE,CAAC,CAAG;EAAA,CAC7BP,MAAM;AACb,CAAC;AAED,WAAaQ,2BAA2B;EAGpC,qCAAYC,MAAoC,EAAE;IAAA;IAAA,KAF3CA,MAAM;IAGT,IAAI,CAACA,MAAM,GAAGA,MAAM;EACxB;EAAC;IAAA;IAAA,OAED,2BAAyBjB,KAAa,EAAmB;MACrD,IAAMkB,KAAK,GAAGP,sBAAsB,CAACX,KAAK,CAAC,IAAI,IAAI,CAACiB,MAAM,CAAChB,MAAM;MACjE,IAAIkB,SAAS,GAAG,CAAC;MAEjB,IAAI,CAACD,KAAK,EAAE;QACRC,SAAS,GAAGpB,sBAAsB,CAACC,KAAK,EAAE,IAAI,CAACiB,MAAM,CAAChB,MAAM,CAAC;MACjE;MAEA,OAAO;QAAEiB,KAAK,EAALA,KAAK;QAAEC,SAAS,EAATA;MAAU,CAAC;IAC/B;EAAC;EAAA;AAAA"},"metadata":{},"sourceType":"module"}