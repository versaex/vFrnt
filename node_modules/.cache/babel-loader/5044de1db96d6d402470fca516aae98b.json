{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport { getCanonicalLocales } from './get-canonical-locales';\nimport { invariant } from './invariant';\nimport { toObject, getOption } from './polyfill-utils';\nexport function createResolveLocale(getDefaultLocale) {\n  var lookupMatcher = createLookupMatcher(getDefaultLocale);\n  var bestFitMatcher = createBestFitMatcher(getDefaultLocale);\n  /**\n   * https://tc39.es/ecma402/#sec-resolvelocale\n   */\n  return function resolveLocale(availableLocales, requestedLocales, options, relevantExtensionKeys, localeData) {\n    var matcher = options.localeMatcher;\n    var r;\n    if (matcher === 'lookup') {\n      r = lookupMatcher(availableLocales, requestedLocales);\n    } else {\n      r = bestFitMatcher(availableLocales, requestedLocales);\n    }\n    var foundLocale = r.locale;\n    var result = {\n      locale: '',\n      dataLocale: foundLocale\n    };\n    var supportedExtension = '-u';\n    for (var _i = 0, relevantExtensionKeys_1 = relevantExtensionKeys; _i < relevantExtensionKeys_1.length; _i++) {\n      var key = relevantExtensionKeys_1[_i];\n      var foundLocaleData = localeData[foundLocale];\n      invariant(typeof foundLocaleData === 'object' && foundLocaleData !== null, \"locale data \" + key + \" must be an object\");\n      var keyLocaleData = foundLocaleData[key];\n      invariant(Array.isArray(keyLocaleData), \"keyLocaleData for \" + key + \" must be an array\");\n      var value = keyLocaleData[0];\n      invariant(typeof value === 'string' || value === null, 'value must be string or null');\n      var supportedExtensionAddition = '';\n      if (r.extension) {\n        var requestedValue = unicodeExtensionValue(r.extension, key);\n        if (requestedValue !== undefined) {\n          if (requestedValue !== '') {\n            if (~keyLocaleData.indexOf(requestedValue)) {\n              value = requestedValue;\n              supportedExtensionAddition = \"-\" + key + \"-\" + value;\n            }\n          } else if (~requestedValue.indexOf('true')) {\n            value = 'true';\n            supportedExtensionAddition = \"-\" + key;\n          }\n        }\n      }\n      if (key in options) {\n        var optionsValue = options[key];\n        invariant(typeof optionsValue === 'string' || typeof optionsValue === 'undefined' || optionsValue === null, 'optionsValue must be String, Undefined or Null');\n        if (~keyLocaleData.indexOf(optionsValue)) {\n          if (optionsValue !== value) {\n            value = optionsValue;\n            supportedExtensionAddition = '';\n          }\n        }\n      }\n      result[key] = value;\n      supportedExtension += supportedExtensionAddition;\n    }\n    if (supportedExtension.length > 2) {\n      var privateIndex = foundLocale.indexOf('-x-');\n      if (privateIndex === -1) {\n        foundLocale = foundLocale + supportedExtension;\n      } else {\n        var preExtension = foundLocale.slice(0, privateIndex);\n        var postExtension = foundLocale.slice(privateIndex, foundLocale.length);\n        foundLocale = preExtension + supportedExtension + postExtension;\n      }\n      foundLocale = getCanonicalLocales(foundLocale)[0];\n    }\n    result.locale = foundLocale;\n    return result;\n  };\n}\n/**\n * https://tc39.es/ecma402/#sec-unicodeextensionvalue\n * @param extension\n * @param key\n */\nfunction unicodeExtensionValue(extension, key) {\n  invariant(key.length === 2, 'key must have 2 elements');\n  var size = extension.length;\n  var searchValue = \"-\" + key + \"-\";\n  var pos = extension.indexOf(searchValue);\n  if (pos !== -1) {\n    var start = pos + 4;\n    var end = start;\n    var k = start;\n    var done = false;\n    while (!done) {\n      var e = extension.indexOf('-', k);\n      var len = void 0;\n      if (e === -1) {\n        len = size - k;\n      } else {\n        len = e - k;\n      }\n      if (len === 2) {\n        done = true;\n      } else if (e === -1) {\n        end = size;\n        done = true;\n      } else {\n        end = e;\n        k = e + 1;\n      }\n    }\n    return extension.slice(start, end);\n  }\n  searchValue = \"-\" + key;\n  pos = extension.indexOf(searchValue);\n  if (pos !== -1 && pos + 3 === size) {\n    return '';\n  }\n  return undefined;\n}\nvar UNICODE_EXTENSION_SEQUENCE_REGEX = /-u(?:-[0-9a-z]{2,8})+/gi;\n/**\n * https://tc39.es/ecma402/#sec-bestavailablelocale\n * @param availableLocales\n * @param locale\n */\nfunction bestAvailableLocale(availableLocales, locale) {\n  var candidate = locale;\n  while (true) {\n    if (~availableLocales.indexOf(candidate)) {\n      return candidate;\n    }\n    var pos = candidate.lastIndexOf('-');\n    if (!~pos) {\n      return undefined;\n    }\n    if (pos >= 2 && candidate[pos - 2] === '-') {\n      pos -= 2;\n    }\n    candidate = candidate.slice(0, pos);\n  }\n}\nfunction createLookupMatcher(getDefaultLocale) {\n  /**\n   * https://tc39.es/ecma402/#sec-lookupmatcher\n   */\n  return function lookupMatcher(availableLocales, requestedLocales) {\n    var result = {\n      locale: ''\n    };\n    for (var _i = 0, requestedLocales_1 = requestedLocales; _i < requestedLocales_1.length; _i++) {\n      var locale = requestedLocales_1[_i];\n      var noExtensionLocale = locale.replace(UNICODE_EXTENSION_SEQUENCE_REGEX, '');\n      var availableLocale = bestAvailableLocale(availableLocales, noExtensionLocale);\n      if (availableLocale) {\n        result.locale = availableLocale;\n        if (locale !== noExtensionLocale) {\n          result.extension = locale.slice(noExtensionLocale.length + 1, locale.length);\n        }\n        return result;\n      }\n    }\n    result.locale = getDefaultLocale();\n    return result;\n  };\n}\nfunction createBestFitMatcher(getDefaultLocale) {\n  return function bestFitMatcher(availableLocales, requestedLocales) {\n    var result = {\n      locale: ''\n    };\n    for (var _i = 0, requestedLocales_2 = requestedLocales; _i < requestedLocales_2.length; _i++) {\n      var locale = requestedLocales_2[_i];\n      var noExtensionLocale = locale.replace(UNICODE_EXTENSION_SEQUENCE_REGEX, '');\n      var availableLocale = bestAvailableLocale(availableLocales, noExtensionLocale);\n      if (availableLocale) {\n        result.locale = availableLocale;\n        if (locale !== noExtensionLocale) {\n          result.extension = locale.slice(noExtensionLocale.length + 1, locale.length);\n        }\n        return result;\n      }\n    }\n    result.locale = getDefaultLocale();\n    return result;\n  };\n}\nexport function getLocaleHierarchy(locale, aliases, parentLocales) {\n  var results = [locale];\n  if (aliases[locale]) {\n    locale = aliases[locale];\n    results.push(locale);\n  }\n  var parentLocale = parentLocales[locale];\n  if (parentLocale) {\n    results.push(parentLocale);\n  }\n  var localeParts = locale.split('-');\n  for (var i = localeParts.length; i > 1; i--) {\n    results.push(localeParts.slice(0, i - 1).join('-'));\n  }\n  return results;\n}\nfunction lookupSupportedLocales(availableLocales, requestedLocales) {\n  var subset = [];\n  for (var _i = 0, requestedLocales_3 = requestedLocales; _i < requestedLocales_3.length; _i++) {\n    var locale = requestedLocales_3[_i];\n    var noExtensionLocale = locale.replace(UNICODE_EXTENSION_SEQUENCE_REGEX, '');\n    var availableLocale = bestAvailableLocale(availableLocales, noExtensionLocale);\n    if (availableLocale) {\n      subset.push(availableLocale);\n    }\n  }\n  return subset;\n}\nexport function supportedLocales(availableLocales, requestedLocales, options) {\n  var matcher = 'best fit';\n  if (options !== undefined) {\n    options = toObject(options);\n    matcher = getOption(options, 'localeMatcher', 'string', ['lookup', 'best fit'], 'best fit');\n  }\n  if (matcher === 'best fit') {\n    return lookupSupportedLocales(availableLocales, requestedLocales);\n  }\n  return lookupSupportedLocales(availableLocales, requestedLocales);\n}\nvar MissingLocaleDataError = /** @class */function (_super) {\n  __extends(MissingLocaleDataError, _super);\n  function MissingLocaleDataError() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = 'MISSING_LOCALE_DATA';\n    return _this;\n  }\n  return MissingLocaleDataError;\n}(Error);\nexport function isMissingLocaleDataError(e) {\n  return e.type === 'MISSING_LOCALE_DATA';\n}\nexport function unpackData(locale, localeData, /** By default shallow merge the dictionaries. */\nreducer) {\n  if (reducer === void 0) {\n    reducer = function reducer(all, d) {\n      return __assign(__assign({}, all), d);\n    };\n  }\n  var localeHierarchy = getLocaleHierarchy(locale, localeData.aliases, localeData.parentLocales);\n  var dataToMerge = localeHierarchy.map(function (l) {\n    return localeData.data[l];\n  }).filter(Boolean);\n  if (!dataToMerge.length) {\n    throw new MissingLocaleDataError(\"Missing locale data for \\\"\" + locale + \"\\\", lookup hierarchy: \" + localeHierarchy.join(', '));\n  }\n  dataToMerge.reverse();\n  return dataToMerge.reduce(reducer, {});\n}","map":{"version":3,"sources":["../src/resolve-locale.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { getCanonicalLocales } from './get-canonical-locales';\nimport { invariant } from './invariant';\nimport { toObject, getOption } from './polyfill-utils';\nexport function createResolveLocale(getDefaultLocale) {\n    var lookupMatcher = createLookupMatcher(getDefaultLocale);\n    var bestFitMatcher = createBestFitMatcher(getDefaultLocale);\n    /**\n     * https://tc39.es/ecma402/#sec-resolvelocale\n     */\n    return function resolveLocale(availableLocales, requestedLocales, options, relevantExtensionKeys, localeData) {\n        var matcher = options.localeMatcher;\n        var r;\n        if (matcher === 'lookup') {\n            r = lookupMatcher(availableLocales, requestedLocales);\n        }\n        else {\n            r = bestFitMatcher(availableLocales, requestedLocales);\n        }\n        var foundLocale = r.locale;\n        var result = { locale: '', dataLocale: foundLocale };\n        var supportedExtension = '-u';\n        for (var _i = 0, relevantExtensionKeys_1 = relevantExtensionKeys; _i < relevantExtensionKeys_1.length; _i++) {\n            var key = relevantExtensionKeys_1[_i];\n            var foundLocaleData = localeData[foundLocale];\n            invariant(typeof foundLocaleData === 'object' && foundLocaleData !== null, \"locale data \" + key + \" must be an object\");\n            var keyLocaleData = foundLocaleData[key];\n            invariant(Array.isArray(keyLocaleData), \"keyLocaleData for \" + key + \" must be an array\");\n            var value = keyLocaleData[0];\n            invariant(typeof value === 'string' || value === null, 'value must be string or null');\n            var supportedExtensionAddition = '';\n            if (r.extension) {\n                var requestedValue = unicodeExtensionValue(r.extension, key);\n                if (requestedValue !== undefined) {\n                    if (requestedValue !== '') {\n                        if (~keyLocaleData.indexOf(requestedValue)) {\n                            value = requestedValue;\n                            supportedExtensionAddition = \"-\" + key + \"-\" + value;\n                        }\n                    }\n                    else if (~requestedValue.indexOf('true')) {\n                        value = 'true';\n                        supportedExtensionAddition = \"-\" + key;\n                    }\n                }\n            }\n            if (key in options) {\n                var optionsValue = options[key];\n                invariant(typeof optionsValue === 'string' ||\n                    typeof optionsValue === 'undefined' ||\n                    optionsValue === null, 'optionsValue must be String, Undefined or Null');\n                if (~keyLocaleData.indexOf(optionsValue)) {\n                    if (optionsValue !== value) {\n                        value = optionsValue;\n                        supportedExtensionAddition = '';\n                    }\n                }\n            }\n            result[key] = value;\n            supportedExtension += supportedExtensionAddition;\n        }\n        if (supportedExtension.length > 2) {\n            var privateIndex = foundLocale.indexOf('-x-');\n            if (privateIndex === -1) {\n                foundLocale = foundLocale + supportedExtension;\n            }\n            else {\n                var preExtension = foundLocale.slice(0, privateIndex);\n                var postExtension = foundLocale.slice(privateIndex, foundLocale.length);\n                foundLocale = preExtension + supportedExtension + postExtension;\n            }\n            foundLocale = getCanonicalLocales(foundLocale)[0];\n        }\n        result.locale = foundLocale;\n        return result;\n    };\n}\n/**\n * https://tc39.es/ecma402/#sec-unicodeextensionvalue\n * @param extension\n * @param key\n */\nfunction unicodeExtensionValue(extension, key) {\n    invariant(key.length === 2, 'key must have 2 elements');\n    var size = extension.length;\n    var searchValue = \"-\" + key + \"-\";\n    var pos = extension.indexOf(searchValue);\n    if (pos !== -1) {\n        var start = pos + 4;\n        var end = start;\n        var k = start;\n        var done = false;\n        while (!done) {\n            var e = extension.indexOf('-', k);\n            var len = void 0;\n            if (e === -1) {\n                len = size - k;\n            }\n            else {\n                len = e - k;\n            }\n            if (len === 2) {\n                done = true;\n            }\n            else if (e === -1) {\n                end = size;\n                done = true;\n            }\n            else {\n                end = e;\n                k = e + 1;\n            }\n        }\n        return extension.slice(start, end);\n    }\n    searchValue = \"-\" + key;\n    pos = extension.indexOf(searchValue);\n    if (pos !== -1 && pos + 3 === size) {\n        return '';\n    }\n    return undefined;\n}\nvar UNICODE_EXTENSION_SEQUENCE_REGEX = /-u(?:-[0-9a-z]{2,8})+/gi;\n/**\n * https://tc39.es/ecma402/#sec-bestavailablelocale\n * @param availableLocales\n * @param locale\n */\nfunction bestAvailableLocale(availableLocales, locale) {\n    var candidate = locale;\n    while (true) {\n        if (~availableLocales.indexOf(candidate)) {\n            return candidate;\n        }\n        var pos = candidate.lastIndexOf('-');\n        if (!~pos) {\n            return undefined;\n        }\n        if (pos >= 2 && candidate[pos - 2] === '-') {\n            pos -= 2;\n        }\n        candidate = candidate.slice(0, pos);\n    }\n}\nfunction createLookupMatcher(getDefaultLocale) {\n    /**\n     * https://tc39.es/ecma402/#sec-lookupmatcher\n     */\n    return function lookupMatcher(availableLocales, requestedLocales) {\n        var result = { locale: '' };\n        for (var _i = 0, requestedLocales_1 = requestedLocales; _i < requestedLocales_1.length; _i++) {\n            var locale = requestedLocales_1[_i];\n            var noExtensionLocale = locale.replace(UNICODE_EXTENSION_SEQUENCE_REGEX, '');\n            var availableLocale = bestAvailableLocale(availableLocales, noExtensionLocale);\n            if (availableLocale) {\n                result.locale = availableLocale;\n                if (locale !== noExtensionLocale) {\n                    result.extension = locale.slice(noExtensionLocale.length + 1, locale.length);\n                }\n                return result;\n            }\n        }\n        result.locale = getDefaultLocale();\n        return result;\n    };\n}\nfunction createBestFitMatcher(getDefaultLocale) {\n    return function bestFitMatcher(availableLocales, requestedLocales) {\n        var result = { locale: '' };\n        for (var _i = 0, requestedLocales_2 = requestedLocales; _i < requestedLocales_2.length; _i++) {\n            var locale = requestedLocales_2[_i];\n            var noExtensionLocale = locale.replace(UNICODE_EXTENSION_SEQUENCE_REGEX, '');\n            var availableLocale = bestAvailableLocale(availableLocales, noExtensionLocale);\n            if (availableLocale) {\n                result.locale = availableLocale;\n                if (locale !== noExtensionLocale) {\n                    result.extension = locale.slice(noExtensionLocale.length + 1, locale.length);\n                }\n                return result;\n            }\n        }\n        result.locale = getDefaultLocale();\n        return result;\n    };\n}\nexport function getLocaleHierarchy(locale, aliases, parentLocales) {\n    var results = [locale];\n    if (aliases[locale]) {\n        locale = aliases[locale];\n        results.push(locale);\n    }\n    var parentLocale = parentLocales[locale];\n    if (parentLocale) {\n        results.push(parentLocale);\n    }\n    var localeParts = locale.split('-');\n    for (var i = localeParts.length; i > 1; i--) {\n        results.push(localeParts.slice(0, i - 1).join('-'));\n    }\n    return results;\n}\nfunction lookupSupportedLocales(availableLocales, requestedLocales) {\n    var subset = [];\n    for (var _i = 0, requestedLocales_3 = requestedLocales; _i < requestedLocales_3.length; _i++) {\n        var locale = requestedLocales_3[_i];\n        var noExtensionLocale = locale.replace(UNICODE_EXTENSION_SEQUENCE_REGEX, '');\n        var availableLocale = bestAvailableLocale(availableLocales, noExtensionLocale);\n        if (availableLocale) {\n            subset.push(availableLocale);\n        }\n    }\n    return subset;\n}\nexport function supportedLocales(availableLocales, requestedLocales, options) {\n    var matcher = 'best fit';\n    if (options !== undefined) {\n        options = toObject(options);\n        matcher = getOption(options, 'localeMatcher', 'string', ['lookup', 'best fit'], 'best fit');\n    }\n    if (matcher === 'best fit') {\n        return lookupSupportedLocales(availableLocales, requestedLocales);\n    }\n    return lookupSupportedLocales(availableLocales, requestedLocales);\n}\nvar MissingLocaleDataError = /** @class */ (function (_super) {\n    __extends(MissingLocaleDataError, _super);\n    function MissingLocaleDataError() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'MISSING_LOCALE_DATA';\n        return _this;\n    }\n    return MissingLocaleDataError;\n}(Error));\nexport function isMissingLocaleDataError(e) {\n    return e.type === 'MISSING_LOCALE_DATA';\n}\nexport function unpackData(locale, localeData, \n/** By default shallow merge the dictionaries. */\nreducer) {\n    if (reducer === void 0) { reducer = function (all, d) { return (__assign(__assign({}, all), d)); }; }\n    var localeHierarchy = getLocaleHierarchy(locale, localeData.aliases, localeData.parentLocales);\n    var dataToMerge = localeHierarchy\n        .map(function (l) { return localeData.data[l]; })\n        .filter(Boolean);\n    if (!dataToMerge.length) {\n        throw new MissingLocaleDataError(\"Missing locale data for \\\"\" + locale + \"\\\", lookup hierarchy: \" + localeHierarchy.join(', '));\n    }\n    dataToMerge.reverse();\n    return dataToMerge.reduce(reducer, {});\n}\n//# sourceMappingURL=resolve-locale.js.map"]},"metadata":{},"sourceType":"module"}