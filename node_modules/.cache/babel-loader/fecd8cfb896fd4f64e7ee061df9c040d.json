{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\Elton\\\\OneDrive\\\\Desktop\\\\baseapp-2024\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"C:\\\\Users\\\\Elton\\\\OneDrive\\\\Desktop\\\\baseapp-2024\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport update from 'immutability-helper';\nimport { defaultStorageLimit } from '../../../api';\nimport { sliceArray } from '../../../helpers';\nimport { API_KEY_CREATE, API_KEY_CREATE_FETCH, API_KEY_DELETE, API_KEY_DELETE_FETCH, API_KEY_UPDATE, API_KEY_UPDATE_FETCH, API_KEYS_2FA_MODAL, API_KEYS_DATA, API_KEYS_ERROR, API_KEYS_FETCH } from './constants';\nexport var initialApiKeysState = {\n  apiKeys: [],\n  dataLoaded: false,\n  modal: {\n    active: false\n  },\n  pageIndex: 0,\n  nextPageExists: false\n};\nexport var apiKeysReducer = function apiKeysReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialApiKeysState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case API_KEYS_FETCH:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        error: undefined\n      });\n    case API_KEYS_DATA:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        apiKeys: sliceArray(action.payload.apiKeys, defaultStorageLimit()),\n        dataLoaded: true,\n        pageIndex: action.payload.pageIndex,\n        nextPageExists: action.payload.nextPageExists\n      });\n    case API_KEY_CREATE_FETCH:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        error: undefined\n      });\n    case API_KEY_CREATE:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        apiKeys: state.apiKeys.concat(action.payload)\n      });\n    case API_KEY_UPDATE_FETCH:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        error: undefined\n      });\n    case API_KEY_UPDATE:\n      var apiKeyIndex = state.apiKeys.findIndex(function (e) {\n        return e.kid === action.payload.kid;\n      });\n      var apiKeys = update(state.apiKeys, _defineProperty({}, apiKeyIndex, {\n        state: {\n          $set: action.payload.state\n        },\n        updated_at: {\n          $set: action.payload.updated_at\n        }\n      }));\n      return _objectSpread(_objectSpread({}, state), {}, {\n        apiKeys: apiKeys\n      });\n    case API_KEY_DELETE_FETCH:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        error: undefined\n      });\n    case API_KEY_DELETE:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        apiKeys: state.apiKeys.filter(function (apiKey) {\n          return apiKey.kid !== action.payload.kid;\n        })\n      });\n    case API_KEYS_2FA_MODAL:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        modal: action.payload\n      });\n    case API_KEYS_ERROR:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        error: action.error\n      });\n    default:\n      return state;\n  }\n};","map":{"version":3,"names":["update","defaultStorageLimit","sliceArray","API_KEY_CREATE","API_KEY_CREATE_FETCH","API_KEY_DELETE","API_KEY_DELETE_FETCH","API_KEY_UPDATE","API_KEY_UPDATE_FETCH","API_KEYS_2FA_MODAL","API_KEYS_DATA","API_KEYS_ERROR","API_KEYS_FETCH","initialApiKeysState","apiKeys","dataLoaded","modal","active","pageIndex","nextPageExists","apiKeysReducer","state","action","type","error","undefined","payload","concat","apiKeyIndex","findIndex","e","kid","$set","updated_at","filter","apiKey"],"sources":["C:/Users/Elton/OneDrive/Desktop/baseapp-2024/src/modules/user/apiKeys/reducer.ts"],"sourcesContent":["import update from 'immutability-helper';\nimport { defaultStorageLimit } from '../../../api';\nimport { sliceArray } from '../../../helpers';\nimport { CommonError } from '../../types';\nimport { ApiKeyDataInterface, ApiKeysAction } from './actions';\nimport {\n    API_KEY_CREATE,\n    API_KEY_CREATE_FETCH,\n    API_KEY_DELETE,\n    API_KEY_DELETE_FETCH,\n    API_KEY_UPDATE,\n    API_KEY_UPDATE_FETCH,\n    API_KEYS_2FA_MODAL,\n    API_KEYS_DATA,\n    API_KEYS_ERROR,\n    API_KEYS_FETCH,\n} from './constants';\n\nexport interface ApiKeyStateModal {\n    active: boolean;\n    action?: 'getKeys' | 'createKey' | 'createSuccess' | 'updateKey' | 'deleteKey';\n    apiKey?: ApiKeyDataInterface;\n}\n\nexport interface ApiKeysState {\n    apiKeys: ApiKeyDataInterface[];\n    dataLoaded: boolean;\n    modal: ApiKeyStateModal;\n    pageIndex: number;\n    nextPageExists: boolean;\n    error?: CommonError;\n}\n\nexport const initialApiKeysState: ApiKeysState = {\n    apiKeys: [],\n    dataLoaded: false,\n    modal: {\n        active: false,\n    },\n    pageIndex: 0,\n    nextPageExists: false,\n};\n\nexport const apiKeysReducer = (state = initialApiKeysState, action: ApiKeysAction): ApiKeysState => {\n    switch (action.type) {\n        case API_KEYS_FETCH:\n            return {\n                ...state,\n                error: undefined,\n            };\n        case API_KEYS_DATA:\n            return {\n                ...state,\n                apiKeys: sliceArray(action.payload.apiKeys, defaultStorageLimit()),\n                dataLoaded: true,\n                pageIndex: action.payload.pageIndex,\n                nextPageExists: action.payload.nextPageExists,\n            };\n        case API_KEY_CREATE_FETCH:\n            return {\n                ...state,\n                error: undefined,\n            };\n        case API_KEY_CREATE:\n            return {\n                ...state,\n                apiKeys: state.apiKeys.concat(action.payload),\n            };\n        case API_KEY_UPDATE_FETCH:\n            return {\n                ...state,\n                error: undefined,\n            };\n        case API_KEY_UPDATE:\n            const apiKeyIndex = state.apiKeys.findIndex(e => e.kid === action.payload.kid);\n            const apiKeys = update(state.apiKeys, {\n                [apiKeyIndex]: {\n                    state: {$set: action.payload.state},\n                    updated_at: {$set: action.payload.updated_at},\n                },\n            });\n\n            return {\n                ...state,\n                apiKeys,\n            };\n        case API_KEY_DELETE_FETCH:\n            return {\n                ...state,\n                error: undefined,\n            };\n        case API_KEY_DELETE:\n            return {\n                ...state,\n                apiKeys: state.apiKeys.filter(apiKey => apiKey.kid !== action.payload.kid),\n            };\n        case API_KEYS_2FA_MODAL:\n            return {\n                ...state,\n                modal: action.payload,\n            };\n        case API_KEYS_ERROR:\n            return {\n                ...state,\n                error: action.error,\n            };\n        default:\n            return state;\n    }\n};\n"],"mappings":";;AAAA,OAAOA,MAAM,MAAM,qBAAqB;AACxC,SAASC,mBAAmB,QAAQ,cAAc;AAClD,SAASC,UAAU,QAAQ,kBAAkB;AAG7C,SACIC,cAAc,EACdC,oBAAoB,EACpBC,cAAc,EACdC,oBAAoB,EACpBC,cAAc,EACdC,oBAAoB,EACpBC,kBAAkB,EAClBC,aAAa,EACbC,cAAc,EACdC,cAAc,QACX,aAAa;AAiBpB,OAAO,IAAMC,mBAAiC,GAAG;EAC7CC,OAAO,EAAE,EAAE;EACXC,UAAU,EAAE,KAAK;EACjBC,KAAK,EAAE;IACHC,MAAM,EAAE;EACZ,CAAC;EACDC,SAAS,EAAE,CAAC;EACZC,cAAc,EAAE;AACpB,CAAC;AAED,OAAO,IAAMC,cAAc,GAAG,SAAjBA,cAAc,GAAyE;EAAA,IAArEC,KAAK,uEAAGR,mBAAmB;EAAA,IAAES,MAAqB;EAC7E,QAAQA,MAAM,CAACC,IAAI;IACf,KAAKX,cAAc;MACf,uCACOS,KAAK;QACRG,KAAK,EAAEC;MAAS;IAExB,KAAKf,aAAa;MACd,uCACOW,KAAK;QACRP,OAAO,EAAEZ,UAAU,CAACoB,MAAM,CAACI,OAAO,CAACZ,OAAO,EAAEb,mBAAmB,EAAE,CAAC;QAClEc,UAAU,EAAE,IAAI;QAChBG,SAAS,EAAEI,MAAM,CAACI,OAAO,CAACR,SAAS;QACnCC,cAAc,EAAEG,MAAM,CAACI,OAAO,CAACP;MAAc;IAErD,KAAKf,oBAAoB;MACrB,uCACOiB,KAAK;QACRG,KAAK,EAAEC;MAAS;IAExB,KAAKtB,cAAc;MACf,uCACOkB,KAAK;QACRP,OAAO,EAAEO,KAAK,CAACP,OAAO,CAACa,MAAM,CAACL,MAAM,CAACI,OAAO;MAAC;IAErD,KAAKlB,oBAAoB;MACrB,uCACOa,KAAK;QACRG,KAAK,EAAEC;MAAS;IAExB,KAAKlB,cAAc;MACf,IAAMqB,WAAW,GAAGP,KAAK,CAACP,OAAO,CAACe,SAAS,CAAC,UAAAC,CAAC;QAAA,OAAIA,CAAC,CAACC,GAAG,KAAKT,MAAM,CAACI,OAAO,CAACK,GAAG;MAAA,EAAC;MAC9E,IAAMjB,OAAO,GAAGd,MAAM,CAACqB,KAAK,CAACP,OAAO,sBAC/Bc,WAAW,EAAG;QACXP,KAAK,EAAE;UAACW,IAAI,EAAEV,MAAM,CAACI,OAAO,CAACL;QAAK,CAAC;QACnCY,UAAU,EAAE;UAACD,IAAI,EAAEV,MAAM,CAACI,OAAO,CAACO;QAAU;MAChD,CAAC,EACH;MAEF,uCACOZ,KAAK;QACRP,OAAO,EAAPA;MAAO;IAEf,KAAKR,oBAAoB;MACrB,uCACOe,KAAK;QACRG,KAAK,EAAEC;MAAS;IAExB,KAAKpB,cAAc;MACf,uCACOgB,KAAK;QACRP,OAAO,EAAEO,KAAK,CAACP,OAAO,CAACoB,MAAM,CAAC,UAAAC,MAAM;UAAA,OAAIA,MAAM,CAACJ,GAAG,KAAKT,MAAM,CAACI,OAAO,CAACK,GAAG;QAAA;MAAC;IAElF,KAAKtB,kBAAkB;MACnB,uCACOY,KAAK;QACRL,KAAK,EAAEM,MAAM,CAACI;MAAO;IAE7B,KAAKf,cAAc;MACf,uCACOU,KAAK;QACRG,KAAK,EAAEF,MAAM,CAACE;MAAK;IAE3B;MACI,OAAOH,KAAK;EAAC;AAEzB,CAAC"},"metadata":{},"sourceType":"module"}